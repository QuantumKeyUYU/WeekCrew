@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Тема: переменные ---------- */

:root {
  color-scheme: light;

  /* Фон приложения (светлая тема) */
  --app-bg: radial-gradient(circle at 0% 0%, #e5f0ff 0, #f7f5ff 32%, #fdfdfd 70%);
  --app-bg-solid: #f4f4fb;

  /* Поверхности */
  --surface-elevated: rgba(255, 255, 255, 0.96);
  --surface-muted: rgba(255, 255, 255, 0.85);

  /* Текст */
  --text-primary: #020617;   /* почти чёрный, чтобы в светлой теме всё читалось */
  --text-secondary: #4b5563;

  /* Бордеры и тени */
  --border-card: rgba(15, 23, 42, 0.08);
  --shadow-soft: 0 20px 55px rgba(15, 23, 42, 0.10);
  --shadow-card-strong: 0 28px 80px rgba(15, 23, 42, 0.16);
}

.dark {
  color-scheme: dark;

  /* Фон приложения (тёмная тема) */
  --app-bg: radial-gradient(circle at 0% 0%, #020617 0, #020617 35%, #020617 70%);
  --app-bg-solid: #020617;

  --surface-elevated: rgba(15, 23, 42, 0.96);
  --surface-muted: rgba(15, 23, 42, 0.92);

  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;

  --border-card: rgba(148, 163, 184, 0.35);
  --shadow-soft: 0 22px 60px rgba(0, 0, 0, 0.60);
  --shadow-card-strong: 0 30px 90px rgba(0, 0, 0, 0.85);
}

/* ---------- Базовые сбросы и фон ---------- */

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden; /* фикс горизонтального скролла на мобилках */
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "SF Pro Display", "Inter", sans-serif;
  background: var(--app-bg);
  color: var(--text-primary);
}

/* чтобы Tailwind-кнопки/ссылки не рисовали синий outline по умолчанию */
button,
[role="button"],
a {
  outline: none;
}

/* Обычно удобнее пусть Tailwind управляет цветами, но базу слегка выровняем */
@layer base {
  h1,
  h2,
  h3,
  h4 {
    @apply tracking-tight;
  }

  a {
    @apply text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300;
    text-decoration: none;
  }
}

/* ---------- Компонентные классы WeekCrew ---------- */

@layer components {
  /* Общая обёртка страниц (если используешь .app-shell в layout) */
  .app-shell {
    @apply mx-auto flex min-h-screen max-w-3xl flex-col px-4 pb-10 pt-4 sm:px-6 sm:pt-6 lg:px-8;
  }

  .app-main {
    @apply flex-1 space-y-10 sm:space-y-14;
  }

  /* Hero-карта на главной */
  .app-hero {
    border-radius: 1.75rem;
    border: 1px solid var(--border-card);
    background: var(--surface-elevated);
    box-shadow: var(--shadow-card-strong);
    backdrop-filter: blur(22px);
  }

  /* Обычные панели (как блок «Как устроен наш проект», настройки и т.п.) */
  .app-panel {
    border-radius: 1.75rem;
    border: 1px solid var(--border-card);
    background: var(--surface-elevated);
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(18px);
  }

  /* Список шагов на главной */
  .steps-list {
    @apply space-y-3 sm:space-y-4;
  }

  /* Кружок с номером шага */
  .step-index {
    @apply inline-flex h-9 w-9 items-center justify-center rounded-full text-sm font-semibold text-white;
    background-image: radial-gradient(circle at 0% 0%, #4f46e5, #22c55e);
    background-size: 160% 160%;
    box-shadow: 0 12px 32px rgba(79, 70, 229, 0.45);
    transform-origin: center;
    transition:
      transform 0.18s ease-out,
      box-shadow 0.18s ease-out,
      background-position 0.25s ease-out;
  }

  .dark .step-index {
    box-shadow: 0 14px 38px rgba(15, 23, 42, 0.9);
  }

  /* Лёгкая анимация при hover уже заложена в классе group-hover из TSX */
  .group:hover .step-index {
    background-position: 100% 0%;
  }

  /* Чипы / бейджи, если решишь переиспользовать */
  .chip {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-1 text-[11px] font-medium;
    border: 1px solid var(--border-card);
    background: var(--surface-muted);
    color: var(--text-secondary);
    backdrop-filter: blur(18px);
  }

  /* Футер-карточка внизу */
  .app-footer-card {
    border-radius: 1.5rem;
    border: 1px solid var(--border-card);
    background: var(--surface-elevated);
    box-shadow: var(--shadow-soft);
  }
}

/* ---------- Мелкие визуальные правки под мобильный ---------- */

@media (max-width: 640px) {
  .app-hero,
  .app-panel {
    border-radius: 1.5rem;
  }
}
