# UYAN.chat

UYAN.chat ‚Äî –∞–Ω–æ–Ω–∏–º–Ω–∞—è –ø–æ—á—Ç–∞ —Ç—ë–ø–ª—ã—Ö —Å–ª–æ–≤. –í—ã –¥–µ–ª–∏—Ç–µ—Å—å —Ç–µ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏, –∞ –∫—Ç–æ-—Ç–æ –∏–∑ –º–∏—Ä–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –ø–∏—Å—å–º–æ–º –ø–æ–¥–¥–µ—Ä–∂–∫–∏. –ë–µ–∑
—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ª–∞–π–∫–æ–≤ –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ª–µ–Ω—Ç.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- [Next.js 14 (App Router)](https://nextjs.org/)
- [TypeScript](https://www.typescriptlang.org/)
- [Tailwind CSS](https://tailwindcss.com/)
- [Prisma](https://www.prisma.io/) + PostgreSQL
- [Zustand](https://github.com/pmndrs/zustand)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- npm 9+
- –î–æ—Å—Ç—É–ø–Ω—ã–π PostgreSQL (–ª—é–±–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –±–∞–∑–∞ –ø–æ `DATABASE_URL`)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# 2. –ö–æ–ø–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env.local
# –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Å–º. —Ç–∞–±–ª–∏—Ü—É –Ω–∏–∂–µ)

# 3. –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ Prisma
npx prisma migrate dev --name init

# 4. –ó–∞–ø—É—Å–∫–∞–µ–º dev-—Å–µ—Ä–≤–µ—Ä
npm run dev

# 5. –û—Ç–∫—Ä—ã–≤–∞–µ–º http://localhost:3000
```

### –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ–¥

```bash
npm run build
npm start
```

### –õ–∏–Ω—Ç–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
npm run lint
npm run format
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- |
| `DATABASE_URL` | —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Postgres (–Ω–∞–ø—Ä–∏–º–µ—Ä `postgres://user:pass@host:5432/uyan_chat`) |
| `OPENAI_API_KEY` | –∫–ª—é—á OpenAI –¥–ª—è AI-–º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏—Å—Ç–æ—Ä–∏–π |
| `DEVICE_ID_SALT` | –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞-—Å–æ–ª—å –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è `x-device-id` |
| `ADMIN_DASHBOARD_TOKEN` | —Ç–æ–∫–µ–Ω –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤/–¥–∞—à–±–æ—Ä–¥–æ–≤ (–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ) |
| `CRON_SECRET` | —Ç–æ–∫–µ–Ω –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ) |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

Prisma —Ö—Ä–∞–Ω–∏—Ç —Ç—Ä–∏ —Å—É—â–Ω–æ—Å—Ç–∏:

```prisma
model Message {
  id          String        @id @default(cuid())
  body        String
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  deviceHash  String
  status      MessageStatus @default(PENDING)
  replies     Response[]
}

model Response {
  id          String   @id @default(cuid())
  messageId   String
  message     Message  @relation(fields: [messageId], references: [id], onDelete: Cascade)
  body        String
  createdAt   DateTime  @default(now())
  deviceHash  String
}
```

`x-device-id` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è `DEVICE_ID_SALT` –∏ —Ç–æ–ª—å–∫–æ —Ö–µ—à –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –±–∞–∑—É.

## –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã API

- `POST /api/v2/messages/create` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é, –∑–∞–ø—É—Å—Ç–∏—Ç—å AI-–º–æ–¥–µ—Ä–∞—Ü–∏—é –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å.
- `GET /api/v2/messages/random` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é –æ–¥–æ–±—Ä–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –µ—â—ë –Ω–µ –æ—Ç–≤–µ—á–∞–ª–æ.
- `POST /api/v2/responses/create` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é (1 –æ—Ç–≤–µ—Ç –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ).
- `GET /api/v2/my` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–∏—Å—å–º–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –ø–æ–ª—É—á–∏–ª –∏ –æ—Ç–ø—Ä–∞–≤–∏–ª.
- `GET /api/v2/health` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ DEV/PROD.

## PWA

- `public/manifest.json` –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∫–æ–Ω–∫—É –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ UYAN.chat.
- `public/service-worker.js` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ).

## –î–µ–ø–ª–æ–π

- **Vercel**: –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —É–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –¥–æ–±–∞–≤—å—Ç–µ Postgres (Vercel Postgres / Supabase / Railway), –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `npx prisma migrate deploy`.
- **Self-hosted / Render / Railway**: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏, –∑–∞—Ç–µ–º `npm run build` –∏ `npm start`.

## –û –ø—Ä–æ–µ–∫—Ç–µ

–í–µ—Ä—Ö–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –º–æ–±–∏–ª—å–Ω—ã–π —Ç–∞–±–±–∞—Ä –≤–µ–¥—É—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã: –≥–ª–∞–≤–Ω–∞—è, –ø–æ–¥–µ–ª–∏—Ç—å—Å—è, –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å, –æ—Ç–≤–µ—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –°—Ç—Ä–∞–Ω–∏—Ü—ã `/explore`
–∏ `/circle` –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ —Ñ—É—Ç–µ—Ä–∞.

–ù–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ –ø—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ—à–∏–±–∫–∏: /support —Ä–∞–∑–ª–∏—á–∞–µ—Ç –ø—É—Å—Ç—É—é –±–∞–∑—É –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, /my
–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –±—É–¥—É—â–∏—Ö –ø–∏—Å—å–º–∞—Ö.

–ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –∏–¥–µ–∏ ‚Äî –ø–∏—à–∏—Ç–µ –Ω–∞ `hey@uyan.chat`. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –±–µ–∑ —à—É–º–∞ üíú
